<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title> Supersonik Hyperphonik Indoor Positionizer System by Daedalus-TUM</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1> Supersonik Hyperphonik Indoor Positionizer System (S.H.I.P.S.)</h1>
        <p>Positionsbestimmung basierend auf Ultraschallsignaldetektion</p>

        <p class="view"><a href="https://github.com/Daedalus-TUM/ips-indoor-navigation">View the Project on GitHub <small>Daedalus-TUM/ips-indoor-navigation</small></a></p>

        <ul>
          <li><a href="https://github.com/Daedalus-TUM/ips-indoor-navigation/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/Daedalus-TUM/ips-indoor-navigation/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/Daedalus-TUM/ips-indoor-navigation">View On <strong>GitHub</strong></a></li>
        </ul>
	<menu><a href="http://daedalus-tum.github.io/ips-indoor-navigation/index.html">Überblick</a></menu>
	<menu><a href="http://daedalus-tum.github.io/ips-indoor-navigation/Mitmachen.html">Mitmachen</a></menu>
	<menu><a href="http://daedalus-tum.github.io/ips-indoor-navigation/Hardware.html">Hardware</a></menu>
	<menu><a href="http://daedalus-tum.github.io/ips-indoor-navigation/Software.html">Software</a></menu>
		<menu><submenu><a href="http://daedalus-tum.github.io/ips-indoor-navigation/Python.html"> Python</submenu></a></menu>
		<menu><submenu><a href="http://daedalus-tum.github.io/ips-indoor-navigation/C++.html"> C++</submenu></a></menu>
		<menu><submenu><a href="http://daedalus-tum.github.io/ips-indoor-navigation/Arduino.html"> Arduino</submenu></a></menu>
	<menu><a href="http://daedalus-tum.github.io/ips-indoor-navigation/Anwendung.html">Anwendung</a></menu>
       </header>
      <section>
        <h3>
<a name="Python" class="anchor" href="#Python"><span class="octicon octicon-link"></span></a>Software: Python</h3>

<p>Die auf Python3 basierende Softwarelösung ist in fünf Teile gespalten, die die den Anforderungen entsprechenden Funktionen bedienen. <br>Die Funktion des Programmes lässt sich am einfachsten am Beispiel eines eingehenden Datenpaketes erklären. Ein Datenpaket besteht aus einem Array der Länge 12 Bytes, wovon die ersten 5 Bytes die Identifikation des Senders, Empfängers, sowie Typ und Nummer der Nachricht enthalten. Die letzten 7 Byte enthalten die von der Bodenstation gemessene Zeitdifferenz der Signale. Trifft ein solches Paket bei der Basisstation ein, wird es an den Rechner weitergeleitet und von der Klasse Arduino über einen Aufruf der Main-Funktion an den in multilat.c implementierten Triangulationsalgorithmus weitergeleitet. Zugleich wird der Eventhandler aufgerufen, welcher es einem in Team.py implementierten Autopiloten ermöglicht auf neue Messdaten zu reagieren.<br>
Steuerbefehle an das Flugobjekt können durch manuelle Eingabe im GUI von Eventhandler.py oder von einem in Team.py beschriebenen Autopiloten stammen. In beiden Fällen werden die Anweisungen von Arduino.py wieder in ein 12-Byte-Datenpaket umgewandelt. <br>
Um aktuelle Messdaten, und Zustandsbeschreibungen in der graphischen Benutzeroberfläche als Tabellen oder Karten darstellen zu lassen, können Eventhandler.py und Team.py Gui.py aufrufen . Der Aufbau der Benutzeroberfläche selbst ist in daedalus.glade beschrieben.</p>
<p>Die Main-Funktion befindet sich in der Datei ips.py. Hier werden die Klassen aufgerufen und die Navigationssoftware der Team.py-Dateien in das System integriert. Um einen Autopiloten mit IPS-Unterstützung zu erstellen, muss der entsprechende Programmcode in der Datei ips.py importiert werden. Hier am Beispiel 'TeamX.py':</p>
<pre><code>import TeamX</pre></code>
<p>In der Main-Funktion:</p>
<pre><code>if self.team and self.ttyport:<br>
  if self.team == "TeamX":<br>
    self.team = TeamX.TeamX(self);</pre></code>
<p>Zur Installation ist zu beachten, dass das Programm die folgenden Python-Pakete benötigt: python3-gi python3-gi python3-gi-cairo python3-all python3-regex python3-serial python3-gobject. Um die Software verwenden zu können, muss die Basisstation oder ein Arduino-Board an den PC angeschlossen sein. Zum Start des Programmes wird die Datei run.sh ausgeführt. Im erscheinenden Fenster kann die zu verwendende Navigationssoftware ausgewählt werden. Ist die Basisstation angeschlossen, so öffnet sich nun die Karte.
Zur weiteren Konfiguration befinden sich drei Register am linken Fensterrand. Im Register Navigation können die Positionen neuer Wegpunkte oder Bodenstationen eingefügt werden oder bereits vorhandene bearbeitet werden. Das Register Command erlaubt es dem Zeppelin diverse Befehle zu erteilen sowie zur Veranschaulichung der laufenden Berechnungen die Entfernungsradien zu den Wegpunkten in der Karte einzuzeichnen. Das Register Infos gibt die aktuelle Position, Geschwindigkeit und Akkuladung des Zeppelins an.</p>
<p><img src="https://github.com/Daedalus-TUM/ips-indoor-navigation/raw/gh-pages/images/IPSpy2small.jpg" alt=""></p>
<p>Auf der Karte, die den rechten Teil des Fensters einnimmt, sind die Wegpunkte, die Bodenstationen, die aktuelle Position des Zeppelins sowie dessen Pfad eingezeichnet. Die Größe der Karte richtet sich nach der Größe des Feldes das die Bodenstationen aufspannen. Ist eine Bodenstation für die Basisstation nicht erreichbar, so wird sie auf der Karte rot eingezeichnet. Ist sie erreichbar und funktionsfähig, so is sie grün eingezeichnet und die gemessene Distanz zum Zeppelin kann als Kreis um die Bodenstation eingezeichnet werden. Die Position des Zeppelins kann nur dann aktualisiert werden, wenn mindestens drei Bodenstationen grün eingezeichnet sind. Die Höhe des Zeppelins ist an der Farbe des eingezeichneten Pfades zu erkennen. Die verwendete Farbskala passt sich dynamisch an die während dem Flug vorkommenden Höhenwerte an.

Die Software des IPS-Projektes ist auf github.com zu finden (siehe Unterpunkt Links) und sollte dort stets auf dem neuesten Stand gehalten werden. Weiterhin ist darauf zu achten, dass alle Teile des IPS kompatible Software verwenden und die für den Versuchsaufbau notwendigen Einstellungen in der Software bezüglich der Positionen der Bodenstationen vorgenommen wurden.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/Daedalus-TUM">Daedalus-TUM</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
